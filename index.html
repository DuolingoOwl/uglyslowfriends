<!DOCTYPE html>
<html>
	<head>
		<title>We're Killing You</title>
		<link rel="icon" type="image/x-icon" href="images/favicon.ico">

		<style type="text/css">
			.sectionLeft {
				float: left;
				width: 80%;
			}
			.sectionRight {
				float: right;
				width: 20%;
			}
			.scoreContainer {
				background-color: rgb(238,238,238,0.6);
				width: 50%;
				padding: 10px;
				border-radius: 10px;
				font-size: 24px;
				font-weight: bold;
			}
			.clickerContainer img{
				position: relative;
				transition: all .2s ease-in-out;
			}
			.clickerContainer img:hover {transform: scale(1.10);}
			.clickerContainer img:active {transform: scale(0.99);}
		</style>
	</head>
	<body>

		<h1>YOU BELONG ON UGLYSLOWFRIENDS.COM</h1>
		<div class="sectionLeft">
			<center>
				<div class="scoreContainer">
					Your ugly slow friend's score: <span id = "score">0</span><br>
					<span id = "scorePerSecond">0</span> ugly slow friends per second
				</div>
				<br>
				<div class="clickerContainer">
					<img src="images/uglyslowfriend.png" height = "256px" onclick="addToScore(1)">
				</div>
			</center>
		</div>

		<div class = "sectionRight">
			<button onclick="buyCursor()">Cursor [<span id = "cursorCost">15</span>] -- <span id = "cursors">0</span></button>
		</div>
		<script type="text/javascript">
			var score = 0;

			var cursorCost = 15;
			var cursors = 0;

			function buyCursor(argument) {
				if (score >= cursorCost) {
					score -= cursorCost;
					cursors += 1;
					cursorCost = Math.round(cursorCost * 1.15);

					document.getElementById("score").innerHTML = score;
					document.getElementById("cursorCost").innerHTML = cursorCost;
					document.getElementById("cursors").innerHTML = cursors;

					updateScorePerSecond();
				}
			}

			function addToScore(amount) {
				score += amount;
				document.getElementById("score").innerHTML = score;
			}

			function updateScorePerSecond() {
				scorePerSecond = cursors;
				document.getElementById("scorePerSecond").innerHTML = scorePerSecond;
			}
			let interval = 1000;
			let run = setInterval(request, interval); // start setInterval as "run"
			
			function request() {
				console.log(interval);
				clearInterval(run); // stop the setInterval()
				score += 1;
				console.log(interval); // firebug or chrome log
				document.getElementById("score").innerHTML = score;
				document.title = score + " friends";
			
				// dynamically change the run interval
				interval = interval/(cursors+1);
			
			    run = setInterval(request, interval); // start the setInterval()
			}

			//setInterval(function() {
			//	score += 1;
			//	document.getElementById("score").innerHTML = score;

			//	document.title = score + " friends";
			//}, 1000/(cursors + 1));
		</script>
	</body>
</html>
